import{o as m,c as _,a as h,d as U,b as I,u as $,e as we,T as z,f as F,i as ye,g as Se,r as J,w as _e,P as o,h as be,t as re,j as xe,k as Ce}from"./vendor.5846cf05.js";const Ee=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}};Ee();const Re={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 959 354"},Oe=h("path",{fill:"#6ab04c",d:"M84.6 354c-10 0-18.8-3-26.4-9-7.6-6-11.4-15.4-11.4-28.2l.6-6.6c4.4-41.2 9.6-84 15.6-128.4 6.4-44.8 11.8-79.2 16.2-103.2L32.4 91.8 25.2 93c-7.6 0-13.6-3-18-9S.6 71.2.6 63.6l.6-5.4c.8-7.6 3.2-13.8 7.2-18.6 4-4.8 11.6-9.6 22.8-14.4 11.6-4.8 28.8-10 51.6-15.6l25.2-6c9.2-2 16.8-3 22.8-3 11.6 0 20.2 3 25.8 9 6 6 9 14.4 9 25.2 0 4.8-.6 10-1.8 15.6-6.4 31.2-18.6 120-36.6 266.4-3.2 24.8-17.4 37.2-42.6 37.2Z"},null,-1),ke=h("path",{fill:"#f0932b",d:"M316.186 354c-39.2 0-69.6-12.8-91.2-38.4-21.2-25.6-31.8-62.2-31.8-109.8 0-40.4 6.2-76 18.6-106.8 12.8-31.2 30.4-55.4 52.8-72.6 22.8-17.2 49.2-25.8 79.2-25.8 39.2 0 69.4 12.8 90.6 38.4 21.6 25.6 32.4 62.2 32.4 109.8 0 40.4-6.4 76.2-19.2 107.4-12.4 30.8-30 54.8-52.8 72-22.4 17.2-48.6 25.8-78.6 25.8Zm6-67.2c21.6 0 38.6-12 51-36 12.4-24 18.6-56.6 18.6-97.8 0-27.6-4.6-48.6-13.8-63-9.2-14.8-22.6-22.2-40.2-22.2-21.6 0-38.6 12.2-51 36.6-12.4 24-18.6 56.6-18.6 97.8 0 27.6 4.4 48.6 13.2 63 9.2 14.4 22.8 21.6 40.8 21.6Z"},null,-1),Ie=h("path",{fill:"#4834d4",d:"M575.967 354c-10 0-18.8-3-26.4-9-7.6-6-11.4-15.4-11.4-28.2l.6-6.6c4.4-41.2 9.6-84 15.6-128.4 6.4-44.8 11.8-79.2 16.2-103.2l-46.8 13.2-7.2 1.2c-7.6 0-13.6-3-18-9s-6.6-12.8-6.6-20.4l.6-5.4c.8-7.6 3.2-13.8 7.2-18.6 4-4.8 11.6-9.6 22.8-14.4 11.6-4.8 28.8-10 51.6-15.6l25.2-6c9.2-2 16.8-3 22.8-3 11.6 0 20.2 3 25.8 9 6 6 9 14.4 9 25.2 0 4.8-.6 10-1.8 15.6-6.4 31.2-18.6 120-36.6 266.4-3.2 24.8-17.4 37.2-42.6 37.2Z"},null,-1),$e=h("path",{fill:"#eb4d4b",d:"M807.553 354c-39.2 0-69.6-12.8-91.2-38.4-21.2-25.6-31.8-62.2-31.8-109.8 0-40.4 6.2-76 18.6-106.8 12.8-31.2 30.4-55.4 52.8-72.6 22.8-17.2 49.2-25.8 79.2-25.8 39.2 0 69.4 12.8 90.6 38.4 21.6 25.6 32.4 62.2 32.4 109.8 0 40.4-6.4 76.2-19.2 107.4-12.4 30.8-30 54.8-52.8 72-22.4 17.2-48.6 25.8-78.6 25.8Zm6-67.2c21.6 0 38.6-12 51-36 12.4-24 18.6-56.6 18.6-97.8 0-27.6-4.6-48.6-13.8-63-9.2-14.8-22.6-22.2-40.2-22.2-21.6 0-38.6 12.2-51 36.6-12.4 24-18.6 56.6-18.6 97.8 0 27.6 4.4 48.6 13.2 63 9.2 14.4 22.8 21.6 40.8 21.6Z"},null,-1),Te=[Oe,ke,Ie,$e];function Ae(r,e){return m(),_("svg",Re,Te)}var Pe={render:Ae};const Me={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Le=h("path",{fill:"currentColor",d:"M392 105c.9-27 .2-56 .1-57H119.3c0 1-.8 30 .1 57H48c0 68 9.9 102.3 21 126.7S95.4 277 127.7 302c30.1 23.3 95.5 53.6 104.3 57.6v28.3c-4.6 10-23.5 28.2-83.3 28.2H128v48h256v-48h-25.7c-60.7 0-75-19.1-78.3-28.2v-28.3c9.3-4.6 80.9-40.3 104.4-57.5 25.2-18.4 50.9-51.5 58.7-70.3S464 167 464 105h-72zM109.6 211.9c-8.8-18.2-14-37.9-15.7-61.9h28.7c.7 6 1.4 11.3 2.3 16.3 6.6 39.2 14.8 70.2 25.7 96.5-17.3-13.5-31.3-30.8-41-50.9zm292.8 0c-9.9 20.3-24 37.7-41.6 51.3 11-26.2 19-56.8 25.8-96.9.8-5 1.6-10.3 2.3-16.3h29.3c-1.8 24-6.9 43.7-15.8 61.9z"},null,-1),Ne=[Le];function je(r,e){return m(),_("svg",Me,Ne)}var Be={render:je};const De={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Ge=h("path",{fill:"currentColor",d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm120 182.15a8.62 8.62 0 0 1-8.62 8.62h-59.54a8.61 8.61 0 0 1-6.09-14.71l22.17-22.17-5.6-6.51a87.38 87.38 0 1 0-62.94 148 87.55 87.55 0 0 0 82.42-58.25A16 16 0 1 1 368 295.8a119.4 119.4 0 1 1-112.62-159.18 118.34 118.34 0 0 1 86.36 36.95l.56.62 4.31 5 14.68-14.68a8.44 8.44 0 0 1 6-2.54 8.61 8.61 0 0 1 8.68 8.63z"},null,-1),Ve=[Ge];function Ue(r,e){return m(),_("svg",De,Ve)}var Fe={render:Ue};const Ye={key:0,class:"absolute inset-0"},He=h("div",{class:"absolute inset-0 bg-white opacity-80"},null,-1),We={class:"relative w-full h-0 pt-full"},ze={class:"absolute inset-0 flex flex-col justify-center items-center"},Je=h("div",{class:"text-3xl font-sans text-red"},"Game over",-1),Xe=U({props:{value:{type:Boolean,required:!0}},emits:["restart"],setup(r,{emit:e}){const t=r;return(i,s)=>t.value?(m(),_("div",Ye,[He,h("div",We,[h("div",ze,[Je,h("button",{class:"mt-3",onClick:s[0]||(s[0]=a=>e("restart",!1))},[I($(Fe),{class:"w-12 h-12 text-red"})])])])])):we("",!0)}});var T;(function(r){r.SERVICE="SERVICE",r.PROVIDER="PROVIDER"})(T||(T={}));var j;(function(r){r.MANUAL="MANUAL",r.AUTO="AUTO"})(j||(j={}));const qe="design:paramtypes",ae="design:injection:type",X="design:injection:token",Ze=r=>{const e=Reflect.getMetadata(qe,r)||[],t=Qe(r),i=t.map((s,a)=>a);return e.reduce((s,a,c)=>(i.includes(c)?s[c]=t[c]:s[c]={type:j.AUTO,data:a},s),[])},Ke=r=>{const e=Reflect.getMetadata(ae,r);return e!=null?e:T.SERVICE},ce=(r,e)=>{Reflect.defineMetadata(ae,e,r)},Qe=r=>{var e;return(e=Reflect.getMetadata(X,r))!=null?e:[]},et=(r,e,t)=>{var s;const i=(s=Reflect.getMetadata(X,r))!=null?s:[];i[t]={type:j.MANUAL,data:e},Reflect.defineMetadata(X,i,r)};class tt{register(e){if(this.registrations.has(e))throw new Error(`The injection ${e.name} has been already registered`);const t={type:Ke(e),class:e,dependencies:Ze(e)};this.registrations.set(e,t)}resolve(e,t={}){const i=this.getServiceData(e),s=this.collectDependencies(i.dependencies,t);if(i.type===T.PROVIDER&&this.providers.has(e))return this.providers.get(e);const a=new i.class(...s);return i.type===T.PROVIDER&&this.providers.set(e,a),a}collectDependencies(e,t){return e.map(i=>i.type===j.AUTO?this.resolve(i.data):t[i.data])}getServiceData(e){const t=this.registrations.get(e);if(t)return t;throw new Error(`The injection ${e.name} has not been registered`)}constructor(){this.providers=new Map,this.registrations=new Map}}const b=new tt,A=30,f=10*A,oe="1010_SCORE",q="SOUND_CLICK",Z="SOUND_SUCCESS";var st="/tenten/assets/click.48cf29d2.mp3",nt="/tenten/assets/success.9cc4435b.mp3";const le=Symbol("Scene"),B=()=>r=>{ce(r,T.SERVICE),b.register(r)},Y=()=>r=>{ce(r,T.PROVIDER),b.register(r)},K=()=>(r,e,t)=>{et(r,le,t)},g=r=>r instanceof z||r instanceof F||ye(r),x=r=>g(r)?r.value:r,P=r=>new z(r),Q=r=>new Se(r),M=r=>new F(r),ee=r=>{const e=J(r.value);return _e(e,t=>r.value=t),r.subscribe(t=>e.value=t),e};class te extends o.GameObjects.Rectangle{constructor(e,t,i,s,a,c,p,v){const{x:ie,y:ve}=x(t),{width:me,height:ge}=x(i);super(e,ie,ve,me,ge,x(s),x(a));this.setStrokeStyle(x(c),x(p),x(v)),g(t)&&t.subscribe(u=>{this.setX(u.x),this.setY(u.y)}),g(i)&&i.subscribe(u=>{this.width=u.width,this.height=u.height}),g(s)&&s.subscribe(u=>{this.setFillStyle(u,this.fillAlpha)}),g(a)&&a.subscribe(u=>{this.setFillStyle(this.fillColor,u)}),g(c)&&c.subscribe(u=>{this.setStrokeStyle(u,this.strokeColor,this.strokeAlpha)}),g(p)&&p.subscribe(u=>{this.setStrokeStyle(this.lineWidth,u,this.strokeAlpha)}),g(v)&&v.subscribe(u=>{this.setStrokeStyle(this.lineWidth,this.strokeColor,u)})}}class n{static origin(){return new n(0,0)}static from(e){return new n(e.x,e.y)}isEqualTo(e){return this.x===e.x&&this.y===e.y}shift(e,t){return new n(this.x+e,this.y+(t!=null?t:e))}mul(e,t){return new n(this.x*e,this.y*(t!=null?t:e))}div(e){return new n(Math.floor(this.x/e),Math.floor(this.y/e))}constructor(e,t){this.x=e,this.y=t}}class L{static square(e){return new L(e,e)}constructor(e,t){this.width=e,this.height=t}}class N extends o.GameObjects.Rectangle{get position(){return x(this.positionValue)}static gridPositionToPoint(e,t){return x(e).mul(t).shift(t/2)}updatePosition(e){const t=N.gridPositionToPoint(e,this.size);this.setX(t.x),this.setY(t.y)}updateColor(e){var t;typeof e=="number"?this.setFillStyle(e,1):this.setFillStyle(e.color,(t=e.alpha)!=null?t:1)}constructor(e,t,i,s){const{x:a,y:c}=N.gridPositionToPoint(t,s);super(e,a,c,s,s);this.positionValue=t,this.size=s,g(this.positionValue)&&this.positionValue.subscribe(this.updatePosition.bind(this)),g(i)?(i.subscribe(this.updateColor.bind(this)),this.updateColor(i.value)):this.updateColor(i),this.setStrokeStyle(2,16777215)}}const l={BLACK:0,BLUE:4732116,GRAY:14673641,GREEN:6991948,LIME:12246104,ORANGE:15766315,PURPLE:12463837,RED:15420747,TEAL:2270899,VIOLET:1249088,WHITE:16777215,YELLOW:16370212};class it extends o.GameObjects.Container{createComputedColor(e){return new F(()=>e.value?{color:l.BLACK,alpha:.5}:this.shape.color)}createComputedPoint(e){return new F(()=>this.reference.value.shift(e.x,e.y))}createElements(){return this.shape.points.map(e=>{const t=this.createComputedPoint(e);return new N(this.scene,t,this.color,A)})}updateVisibility(e){this.setVisible(e)}getBox(){const e=[...this.getPositions()].sort((i,s)=>i.y-s.y),t=[...this.getPositions()].sort((i,s)=>i.x-s.x);return{top:e[0].y,bottom:e[e.length-1].y,left:t[0].x,right:t[t.length-1].x}}getPositions(){return this.elements.map(e=>e.position)}constructor(e,t,i,s,a){super(e);this.shape=t,this.reference=i,this.color=this.createComputedColor(a),this.elements=this.createElements(),this.add(this.elements),s.subscribe(this.updateVisibility.bind(this)),this.updateVisibility(s.value),this.setX(-1*f/2).setY(-1*f/2)}}var C,rt=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:paramtypes",[]),at=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:type",Function),ct=Y();let D=C=ct(C=at(C=rt((C=class he{static notNull(e){return e!==null}get freeCells(){return this.cells.map((e,t)=>{if(e===null){const i=t%10,s=(t-i)/10;return n.from({x:i,y:s})}else return null}).filter(he.notNull)}get cells(){return this.values.value}set cells(e){this.values.value=e}get rows(){return Array.from({length:10}).map((e,t)=>new ot(this,t))}get columns(){return Array.from({length:10}).map((e,t)=>new lt(this,t))}setDelay(e){this.clearDelay=e}getCell(e,t){return this.cells[t*10+e]}setCell(e,t,i){const s=[...this.cells];s[t*10+e]=i,this.cells=s}fillCells(e,t){e.forEach(i=>this.setCell(i.x,i.y,t))}hasCollisions(e){return e.some(t=>this.getCell(t.x,t.y)!==null)}canInsert(e){for(let t=e.edges.top;t<e.edges.bottom+1;t++)for(let i=e.edges.left;i<e.edges.right+1;i++)if(e.points.map(a=>a.shift(i,t)).every(a=>this.freeCells.find(c=>c.isEqualTo(a))))return!0;return!1}subscribe(e){this.values.subscribe(e)}reset(){this.cells=Array.from({length:100}).map(()=>null)}constructor(){this.values=Q(Array.from({length:100}).map(()=>null)),this.clearDelay=20}})||C)||C)||C)||C;class de{get isFull(){return this.values.every(e=>e!==null)}constructor(e,t){this.matrix=e,this.index=t}}class ot extends de{get values(){return this.matrix.cells.slice(10*this.index,10*this.index+10)}}class lt extends de{get values(){return Array.from({length:10}).map((e,t)=>this.matrix.getCell(this.index,t))}}var H,ht=B();let ue=H=ht((H=class{read(e){var t;return(t=localStorage.getItem(e))!=null?t:null}write(e,t){localStorage.setItem(e,t)}})||H)||H;var E,dt=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:paramtypes",[typeof ue=="undefined"?Object:ue]),ut=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:type",Function),ft=Y();let W=E=ft(E=ut(E=dt((E=class{loadFromStorage(){const e=this.storageService.read(oe),t=Number(e);return isNaN(t)?0:t}increase(e){this.current.value+=e,this.current.value>this.highest.value&&(this.highest.value=this.current.value,this.storageService.write(oe,`${this.highest.value}`))}reset(){this.current.value=0}constructor(e){this.storageService=e,this.current=P(0),this.highest=P(this.loadFromStorage())}})||E)||E)||E)||E;class d{get sortedX(){const e=[...this.points].sort((t,i)=>t.x-i.x);return[e[0],e[e.length-1]]}get sortedY(){const e=[...this.points].sort((t,i)=>t.y-i.y);return[e[0],e[e.length-1]]}get dimensions(){const[e,t]=this.sortedX,[i,s]=this.sortedY,a=Math.abs(t.x-e.x)+1,c=Math.abs(s.y-i.y)+1;return new L(a,c)}get edges(){const[e,t]=this.sortedX,[i,s]=this.sortedY;return{top:Math.abs(i.y),bottom:9-Math.abs(s.y),left:Math.abs(e.x),right:9-Math.abs(t.x)}}get center(){return n.from({x:this.dimensions.width/2,y:this.dimensions.height/2})}static from(e){return new d(e.color,...e.points)}constructor(e,...t){this.color=e,this.points=t}}const pt=[new d(l.VIOLET,new n(0,0)),new d(l.LIME,new n(0,0),new n(1,0),new n(0,-1),new n(1,-1)),new d(l.TEAL,new n(0,0),new n(1,0),new n(2,0),new n(0,-1),new n(1,-1),new n(2,-1),new n(0,-2),new n(1,-2),new n(2,-2)),new d(l.YELLOW,new n(0,0),new n(1,0)),new d(l.YELLOW,new n(0,0),new n(0,-1)),new d(l.ORANGE,new n(0,0),new n(1,0),new n(2,0)),new d(l.ORANGE,new n(0,0),new n(0,-1),new n(0,-2)),new d(l.PURPLE,new n(0,0),new n(1,0),new n(2,0),new n(3,0)),new d(l.PURPLE,new n(0,0),new n(0,-1),new n(0,-2),new n(0,-3)),new d(l.RED,new n(-1,0),new n(0,0),new n(1,0),new n(2,0),new n(3,0)),new d(l.RED,new n(0,0),new n(0,-1),new n(0,-2),new n(0,-3),new n(0,-4)),new d(l.GREEN,new n(0,0),new n(0,-1),new n(1,-1)),new d(l.GREEN,new n(0,-1),new n(1,-1),new n(1,0)),new d(l.GREEN,new n(0,0),new n(1,0),new n(1,-1)),new d(l.GREEN,new n(0,0),new n(1,0),new n(0,-1)),new d(l.BLUE,new n(0,0),new n(0,-1),new n(0,-2),new n(1,-2),new n(2,-2)),new d(l.BLUE,new n(0,-2),new n(1,-2),new n(2,-2),new n(2,-1),new n(2,0)),new d(l.BLUE,new n(0,0),new n(1,0),new n(2,0),new n(2,-1),new n(2,-2)),new d(l.BLUE,new n(0,0),new n(1,0),new n(2,0),new n(0,-1),new n(0,-2))];var R,vt=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:paramtypes",[]),mt=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:type",Function),gt=Y();let G=R=gt(R=mt(R=vt((R=class{get availableShapes(){return this.shapes.value.filter((e,t)=>!this.lockedShapes.value.includes(t))}handleLocked(e){e.length===3&&this.reset()}reset(){this.selectedIdx.value=null,this.shapes.value=[...pt].sort(()=>.5-Math.random()).slice(0,3),this.lockedShapes.value=[]}lockSelectedShape(){this.selectedIdx.value!==null&&(this.lockedShapes.value=[...this.lockedShapes.value,this.selectedIdx.value],this.selectedIdx.value=null)}constructor(){this.shapes=Q([]),this.lockedShapes=Q([]),this.selectedIdx=P(null),this.selectedShape=M(()=>this.selectedIdx.value!==null?this.shapes.value[this.selectedIdx.value]:null),this.lockedShapes.subscribe(this.handleLocked.bind(this)),this.reset()}})||R)||R)||R)||R;var O,wt=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:paramtypes",[]),yt=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:type",Function),St=Y();let se=O=St(O=yt(O=wt((O=class{gameOver(){this.isOver.value=!0}reset(){this.isOver.value=!1}constructor(){this.isOver=P(!1)}})||O)||O)||O)||O;const fe=(r,e)=>new Promise(t=>{setTimeout(()=>{r(),t()},e)});var w,_t=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:paramtypes",[typeof o=="undefined"||typeof o.Scene=="undefined"?Object:o.Scene,typeof se=="undefined"?Object:se,typeof G=="undefined"?Object:G,typeof D=="undefined"?Object:D,typeof W=="undefined"?Object:W]),bt=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:type",Function),xt=function(r,e){return K()(r,void 0,0)},Ct=B();let Et=w=Ct(w=xt(w=bt(w=_t((w=class pe extends o.GameObjects.Container{static getGridPosition(e){return n.from(e).div(A)}createHitArea(){return new te(this.scene,n.origin(),L.square(f))}createShapeContainer(e){return new it(this.scene,e,this.pointerPosition,this.isShapeContainerVisible,this.isShapeContainerError)}updateShape(e){this.shapeContainer&&this.remove(this.shapeContainer,!0),e?(this.shapeContainer=this.createShapeContainer(e),this.add(this.shapeContainer)):this.shapeContainer=null}async handleClick(){const e=this.shapeContainer,t=this.shapesService.selectedShape.value;if(!e||!t)return;const i=e.getPositions();if(this.matrixService.hasCollisions(i))return;this.matrixService.fillCells(i,t.color),this.scoreService.increase(t.points.length),this.shapesService.lockSelectedShape();let s=this.matrixService.rows.filter(c=>c.isFull).map(c=>c.values.map((p,v)=>fe(()=>{this.matrixService.setCell(v,c.index,null)},v*this.matrixService.clearDelay))).flat();s.length===0&&(s=this.matrixService.columns.filter(c=>c.isFull).map(c=>c.values.map((p,v)=>fe(()=>{this.matrixService.setCell(c.index,v,null)},v*this.matrixService.clearDelay))).flat()),this.scoreService.increase(s.length),this.scene.sound.get(s.length>0?Z:q).play(),await Promise.all(s),this.shapesService.availableShapes.every(c=>!this.matrixService.canInsert(c))&&this.stateService.gameOver()}handleMove(e){if(!this.shapeContainer||!this.shapesService.selectedShape.value)return;const t=pe.getGridPosition(e),i=this.shapeContainer.getBox(),s=this.shapesService.selectedShape.value.edges,a=()=>t.x-this.pointerPosition.value.x,c=()=>t.y-this.pointerPosition.value.y;i.top+c()<=0?t.y=s.top:i.bottom+c()>=9&&(t.y=s.bottom),i.left+a()<=0?t.x=s.left:i.right+a()>=9&&(t.x=s.right);const p=this.shapeContainer.getPositions().map(v=>v.shift(a(),c()));this.isShapeContainerError.value=this.matrixService.hasCollisions(p),this.pointerPosition.value=t}handleOver(){this.isShapeContainerVisible.value=!0}handleOut(){this.isShapeContainerVisible.value=!1}constructor(e,t,i,s,a){super(e,f/2,f/2);this.pointerPosition=P(n.origin()),this.isShapeContainerVisible=P(!1),this.isShapeContainerError=P(!1),this.shapeContainer=null,this.stateService=t,this.shapesService=i,this.matrixService=s,this.scoreService=a,this.hitArea=this.createHitArea(),this.shapesService.selectedShape.subscribe(this.updateShape.bind(this)),this.updateShape(this.shapesService.selectedShape.value),this.hitArea.setInteractive().on(o.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleClick.bind(this)).on(o.Input.Events.GAMEOBJECT_POINTER_MOVE,this.handleMove.bind(this)).on(o.Input.Events.GAMEOBJECT_POINTER_OVER,this.handleOver.bind(this)).on(o.Input.Events.GAMEOBJECT_POINTER_OUT,this.handleOut.bind(this)),this.add(this.hitArea)}})||w)||w)||w)||w)||w;var y,Rt=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:paramtypes",[typeof o=="undefined"||typeof o.Scene=="undefined"?Object:o.Scene,typeof D=="undefined"?Object:D]),Ot=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:type",Function),kt=function(r,e){return K()(r,void 0,0)},It=B();let $t=y=It(y=kt(y=Ot(y=Rt((y=class extends o.GameObjects.Container{createElement(e,t){return new N(this.scene,e,t,A)}updateElements(e){this.removeAll(!0),e.forEach((t,i)=>{if(t===null)return;const s=i%10,a=(i-s)/10,c=n.from({x:s,y:a}),p=this.createElement(c,t);this.add(p)})}constructor(e,t){super(e);this.matrixService=t,this.matrixService.subscribe(this.updateElements.bind(this))}})||y)||y)||y)||y)||y;class Tt extends o.GameObjects.Container{createBackground(e){return new te(this.scene,n.origin(),L.square(e),this.backgroundColor,.1)}createBorder(e,t){return new te(this.scene,n.origin(),L.square(e-t),l.WHITE,0,t,l.TEAL,this.borderAlpha)}createShapeContainer(e){const t=new o.GameObjects.Container(this.scene),i=e.center.mul(-1,1).shift(e.edges.left,-1),s=e.points.map(a=>{const c=i.shift(a.x,a.y);return new N(this.scene,c,e.color,16)});return t.add(s),t}createComputedBackgroundColor(){return M(()=>!this.disabled.value&&(this.selected.value||this.hovered.value)?l.TEAL:l.WHITE)}createComputedBorderAlpha(){return M(()=>!this.disabled.value&&this.selected.value?1:0)}updateShapeContainer(e){this.remove(this.shapeContainer,!0),this.shapeContainer=this.createShapeContainer(e),this.add(this.shapeContainer)}updateInteractive(e){e?this.background.removeInteractive():this.background.setInteractive({useHandCursor:!0}).on(o.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleClick.bind(this)).on(o.Input.Events.GAMEOBJECT_POINTER_OVER,this.handleOver.bind(this)).on(o.Input.Events.GAMEOBJECT_POINTER_OUT,this.handleOut.bind(this))}updateVisibility(e){this.setVisible(!e)}handleClick(){this.listener&&this.listener()}handleOver(){this.disabled.value||(this.hovered.value=!0)}handleOut(){this.disabled.value||(this.hovered.value=!1)}onClick(e){return this.listener=e,this}constructor(e,t,i,s,a){super(e);this.shape=t,this.disabled=s,this.selected=i,this.hovered=new z(!1),this.backgroundColor=this.createComputedBackgroundColor(),this.borderAlpha=this.createComputedBorderAlpha(),this.background=this.createBackground(a),this.border=this.createBorder(a,2),this.shapeContainer=this.createShapeContainer(this.shape.value),this.listener=null,this.add([this.background,this.border,this.shapeContainer]),this.shape.subscribe(this.updateShapeContainer.bind(this)),this.disabled.subscribe(this.updateInteractive.bind(this)),this.disabled.subscribe(this.updateVisibility.bind(this)),this.updateInteractive(this.disabled.value)}}var S,At=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:paramtypes",[typeof o=="undefined"||typeof o.Scene=="undefined"?Object:o.Scene,typeof G=="undefined"?Object:G]),Pt=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:type",Function),Mt=function(r,e){return K()(r,void 0,0)},Lt=B();let Nt=S=Lt(S=Mt(S=Pt(S=At((S=class V extends o.GameObjects.Container{static get buttonSize(){return A*10/3}create(){const{selectedIdx:e,shapes:t,lockedShapes:i}=this.shapesService,s=t.value.map((a,c)=>{const p=new Tt(this.scene,M(()=>t.value[c]),M(()=>c===e.value),M(()=>i.value.includes(c)),V.buttonSize);return p.setX(c*V.buttonSize).setY(V.buttonSize/2+20).onClick(()=>e.value=c),p});this.add(s),this.setX(V.buttonSize/2)}constructor(e,t){super(e);this.shapesService=t,this.create()}})||S)||S)||S)||S)||S;class ne extends o.Scene{static injectScene(e){return{[le]:e}}getComponent(e){return b.resolve(e,ne.injectScene(this))}}class jt extends o.GameObjects.Container{get children(){return[this.background,...this.lines]}createBackground(){return new o.GameObjects.Rectangle(this.scene,0,0,f,f,l.GRAY)}createLines(){const e=Array.from({length:11}).map((i,s)=>this.createVerticalLine(A*s-f/2)),t=Array.from({length:11}).map((i,s)=>this.createHorizontalLine(A*s-f/2));return[...e,...t]}createVerticalLine(e){return new o.GameObjects.Rectangle(this.scene,e,0,2,f,l.WHITE)}createHorizontalLine(e){return new o.GameObjects.Rectangle(this.scene,0,e,f,2,l.WHITE)}constructor(e){super(e,f/2,f/2);this.background=this.createBackground(),this.lines=this.createLines(),this.add(this.children)}}var k,Bt=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:paramtypes",[]),Dt=typeof Reflect!="undefined"&&typeof Reflect.metadata=="function"&&Reflect.metadata("design:type",Function),Gt=B();let Vt=k=Gt(k=Dt(k=Bt((k=class extends ne{preload(){this.load.audio(q,st),this.load.audio(Z,nt)}create(){this.sound.add(q),this.sound.add(Z);const e=new jt(this),t=this.getComponent($t),i=this.getComponent(Et),s=this.getComponent(Nt);this.add.existing(e),this.add.existing(t).setDepth(0),this.add.existing(i).setDepth(1),this.add.existing(s).setY(f)}constructor(){super("Board")}})||k)||k)||k)||k;class Ut{constructor(e){const t=b.resolve(Vt);this.game=new o.Game({type:o.CANVAS,parent:e,width:f,backgroundColor:16777215,height:e.offsetHeight,scene:[t]})}}const Ft={class:"relative flex flex-col flex-1"},Yt=U({setup(r){const e=J(null),t=b.resolve(se),i=b.resolve(G),s=b.resolve(D),a=b.resolve(W),c=ee(t.isOver),p=()=>{t.reset(),i.reset(),s.reset(),a.reset()};return be(()=>{e.value&&new Ut(e.value)}),(v,ie)=>(m(),_("div",Ft,[h("div",{ref_key:"gameContainer",ref:e,class:"flex-1"},null,512),I(Xe,{value:$(c),onRestart:p},null,8,["value"])]))}}),Ht={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Wt=h("path",{fill:"currentColor",d:"M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 0 0 3.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 0 1-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0 0 25.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 0 1 5-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 0 1 112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 0 1 5 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 0 0 4-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z"},null,-1),zt=[Wt];function Jt(r,e){return m(),_("svg",Ht,zt)}var Xt={render:Jt};const qt={href:"https://github.com/xyz27900/tenten",target:"_blank",class:"flex items-center text-black px-4 py-2 bg-white hover:bg-gray rounded-xl"},Zt=h("span",{class:"text-xl mr-2"},"GitHub",-1),Kt=U({setup(r){return(e,t)=>(m(),_("a",qt,[Zt,I($(Xt),{class:"block w-7 h-7"})]))}});var Qt=(r,e)=>{const t=r.__vccOpts||r;for(const[i,s]of e)t[i]=s;return t};const es={},ts={class:"flex justify-center items-center h-full bg-teal"},ss=h("div",{class:"flex flex-col justify-center items-center mx-8"},[h("div",{class:"text-3xl font-sans text-white mb-3"},"Sorry"),h("div",{class:"text-xl font-sans text-white text-center mb-3"},"The game is currently not available on your device")],-1),ns=[ss];function is(r,e){return m(),_("div",ts,ns)}var rs=Qt(es,[["render",is]]);const as={key:0,class:"flex justify-center h-full"},cs={class:"flex flex-col"},os={class:"flex flex-col shrink-0 py-8"},ls={class:"flex justify-center"},hs={class:"flex items-center mt-8"},ds={class:"flex items-center justify-center flex-1"},us={class:"text-3xl text-teal font-cursive"},fs={class:"flex shrink-0"},ps={class:"flex items-center justify-center flex-1"},vs={class:"text-3xl text-green font-cursive"},ms=U({setup(r){const e=b.resolve(W),t=ee(e.current),i=ee(e.highest),s=J(!("ontouchstart"in window));return(a,c)=>s.value?(m(),_("div",as,[h("div",cs,[h("div",os,[h("div",ls,[I($(Pe),{class:"w-36"})]),h("div",hs,[h("div",ds,[h("span",us,re($(t)),1)]),h("div",fs,[I($(Be),{class:"w-12 h-12 text-yellow"})]),h("div",ps,[h("span",vs,re($(i)),1)])])]),I(Yt)]),I(Kt,{class:"fixed right-4 bottom-4"})])):(m(),xe(rs,{key:1}))}});Ce(ms).mount("#app");
