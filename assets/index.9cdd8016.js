var oe=Object.defineProperty;var le=(s,e,t)=>e in s?oe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var l=(s,e,t)=>(le(s,typeof e!="symbol"?e+"":e,t),t);import{o as C,c as O,a as u,d as V,b as A,u as E,e as ce,T as U,f as B,i as he,g as ue,r as J,w as de,P as h,s as G,h as T,j as w,k as m,l as pe,t as K,m as ve}from"./vendor.0b067610.js";const fe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}};fe();const we={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 959 354"},me=u("path",{fill:"#6ab04c",d:"M84.6 354c-10 0-18.8-3-26.4-9-7.6-6-11.4-15.4-11.4-28.2l.6-6.6c4.4-41.2 9.6-84 15.6-128.4 6.4-44.8 11.8-79.2 16.2-103.2L32.4 91.8 25.2 93c-7.6 0-13.6-3-18-9S.6 71.2.6 63.6l.6-5.4c.8-7.6 3.2-13.8 7.2-18.6 4-4.8 11.6-9.6 22.8-14.4 11.6-4.8 28.8-10 51.6-15.6l25.2-6c9.2-2 16.8-3 22.8-3 11.6 0 20.2 3 25.8 9 6 6 9 14.4 9 25.2 0 4.8-.6 10-1.8 15.6-6.4 31.2-18.6 120-36.6 266.4-3.2 24.8-17.4 37.2-42.6 37.2Z"},null,-1),be=u("path",{fill:"#f0932b",d:"M316.186 354c-39.2 0-69.6-12.8-91.2-38.4-21.2-25.6-31.8-62.2-31.8-109.8 0-40.4 6.2-76 18.6-106.8 12.8-31.2 30.4-55.4 52.8-72.6 22.8-17.2 49.2-25.8 79.2-25.8 39.2 0 69.4 12.8 90.6 38.4 21.6 25.6 32.4 62.2 32.4 109.8 0 40.4-6.4 76.2-19.2 107.4-12.4 30.8-30 54.8-52.8 72-22.4 17.2-48.6 25.8-78.6 25.8Zm6-67.2c21.6 0 38.6-12 51-36 12.4-24 18.6-56.6 18.6-97.8 0-27.6-4.6-48.6-13.8-63-9.2-14.8-22.6-22.2-40.2-22.2-21.6 0-38.6 12.2-51 36.6-12.4 24-18.6 56.6-18.6 97.8 0 27.6 4.4 48.6 13.2 63 9.2 14.4 22.8 21.6 40.8 21.6Z"},null,-1),_e=u("path",{fill:"#4834d4",d:"M575.967 354c-10 0-18.8-3-26.4-9-7.6-6-11.4-15.4-11.4-28.2l.6-6.6c4.4-41.2 9.6-84 15.6-128.4 6.4-44.8 11.8-79.2 16.2-103.2l-46.8 13.2-7.2 1.2c-7.6 0-13.6-3-18-9s-6.6-12.8-6.6-20.4l.6-5.4c.8-7.6 3.2-13.8 7.2-18.6 4-4.8 11.6-9.6 22.8-14.4 11.6-4.8 28.8-10 51.6-15.6l25.2-6c9.2-2 16.8-3 22.8-3 11.6 0 20.2 3 25.8 9 6 6 9 14.4 9 25.2 0 4.8-.6 10-1.8 15.6-6.4 31.2-18.6 120-36.6 266.4-3.2 24.8-17.4 37.2-42.6 37.2Z"},null,-1),ge=u("path",{fill:"#eb4d4b",d:"M807.553 354c-39.2 0-69.6-12.8-91.2-38.4-21.2-25.6-31.8-62.2-31.8-109.8 0-40.4 6.2-76 18.6-106.8 12.8-31.2 30.4-55.4 52.8-72.6 22.8-17.2 49.2-25.8 79.2-25.8 39.2 0 69.4 12.8 90.6 38.4 21.6 25.6 32.4 62.2 32.4 109.8 0 40.4-6.4 76.2-19.2 107.4-12.4 30.8-30 54.8-52.8 72-22.4 17.2-48.6 25.8-78.6 25.8Zm6-67.2c21.6 0 38.6-12 51-36 12.4-24 18.6-56.6 18.6-97.8 0-27.6-4.6-48.6-13.8-63-9.2-14.8-22.6-22.2-40.2-22.2-21.6 0-38.6 12.2-51 36.6-12.4 24-18.6 56.6-18.6 97.8 0 27.6 4.4 48.6 13.2 63 9.2 14.4 22.8 21.6 40.8 21.6Z"},null,-1),Se=[me,be,_e,ge];function xe(s,e){return C(),O("svg",we,Se)}var Ce={render:xe};const Oe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Ee=u("path",{fill:"currentColor",d:"M392 105c.9-27 .2-56 .1-57H119.3c0 1-.8 30 .1 57H48c0 68 9.9 102.3 21 126.7S95.4 277 127.7 302c30.1 23.3 95.5 53.6 104.3 57.6v28.3c-4.6 10-23.5 28.2-83.3 28.2H128v48h256v-48h-25.7c-60.7 0-75-19.1-78.3-28.2v-28.3c9.3-4.6 80.9-40.3 104.4-57.5 25.2-18.4 50.9-51.5 58.7-70.3S464 167 464 105h-72zM109.6 211.9c-8.8-18.2-14-37.9-15.7-61.9h28.7c.7 6 1.4 11.3 2.3 16.3 6.6 39.2 14.8 70.2 25.7 96.5-17.3-13.5-31.3-30.8-41-50.9zm292.8 0c-9.9 20.3-24 37.7-41.6 51.3 11-26.2 19-56.8 25.8-96.9.8-5 1.6-10.3 2.3-16.3h29.3c-1.8 24-6.9 43.7-15.8 61.9z"},null,-1),ye=[Ee];function Pe(s,e){return C(),O("svg",Oe,ye)}var Ie={render:Pe};const $e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Le=u("path",{fill:"currentColor",d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm120 182.15a8.62 8.62 0 0 1-8.62 8.62h-59.54a8.61 8.61 0 0 1-6.09-14.71l22.17-22.17-5.6-6.51a87.38 87.38 0 1 0-62.94 148 87.55 87.55 0 0 0 82.42-58.25A16 16 0 1 1 368 295.8a119.4 119.4 0 1 1-112.62-159.18 118.34 118.34 0 0 1 86.36 36.95l.56.62 4.31 5 14.68-14.68a8.44 8.44 0 0 1 6-2.54 8.61 8.61 0 0 1 8.68 8.63z"},null,-1),Ae=[Le];function Te(s,e){return C(),O("svg",$e,Ae)}var Re={render:Te};const De={key:0,class:"absolute inset-0"},je=u("div",{class:"absolute inset-0 bg-white opacity-80"},null,-1),Be={class:"relative w-full h-0 pt-full"},Ge={class:"absolute inset-0 flex flex-col justify-center items-center"},Me=u("div",{class:"text-3xl font-sans text-red"},"Game over",-1),Ne=V({props:{value:{type:Boolean,required:!0}},emits:["restart"],setup(s,{emit:e}){const t=s;return(i,r)=>t.value?(C(),O("div",De,[je,u("div",Be,[u("div",Ge,[Me,u("button",{class:"mt-3",onClick:r[0]||(r[0]=n=>e("restart",!1))},[A(E(Re),{class:"w-12 h-12 text-red"})])])])])):ce("",!0)}}),g=30,v=10*g,Q="1010_SCORE",H="SOUND_CLICK",Y="SOUND_SUCCESS";var Ve="/tenten/assets/click.48cf29d2.mp3",Ue="/tenten/assets/success.9cc4435b.mp3";class a{constructor(e,t){l(this,"x");l(this,"y");this.x=e,this.y=t}static origin(){return new a(0,0)}static from(e){return new a(e.x,e.y)}isEqualTo(e){return this.x===e.x&&this.y===e.y}shift(e,t){return new a(this.x+e,this.y+(t!=null?t:e))}mul(e,t){return new a(this.x*e,this.y*(t!=null?t:e))}div(e){return new a(Math.floor(this.x/e),Math.floor(this.y/e))}}class y{constructor(e,t){l(this,"width");l(this,"height");this.width=e,this.height=t}static square(e){return new y(e,e)}}const b=s=>s instanceof U||s instanceof B||he(s),_=s=>b(s)?s.value:s,S=s=>new U(s),k=s=>new ue(s),P=s=>new B(s),F=s=>{const e=J(s.value);return de(e,t=>s.value=t),s.subscribe(t=>e.value=t),e};class W extends h.GameObjects.Rectangle{constructor(e,t,i,r,n,o,f,j){const{x:Z,y:ie}=_(t),{width:ne,height:ae}=_(i);super(e,Z,ie,ne,ae,_(r),_(n));this.setStrokeStyle(_(o),_(f),_(j)),b(t)&&t.subscribe(p=>{this.setX(p.x),this.setY(p.y)}),b(i)&&i.subscribe(p=>{this.width=p.width,this.height=p.height}),b(r)&&r.subscribe(p=>{this.setFillStyle(p,this.fillAlpha)}),b(n)&&n.subscribe(p=>{this.setFillStyle(this.fillColor,p)}),b(o)&&o.subscribe(p=>{this.setStrokeStyle(p,this.strokeColor,this.strokeAlpha)}),b(f)&&f.subscribe(p=>{this.setStrokeStyle(this.lineWidth,p,this.strokeAlpha)}),b(j)&&j.subscribe(p=>{this.setStrokeStyle(this.lineWidth,this.strokeColor,p)})}}class I extends h.GameObjects.Rectangle{constructor(e,t,i,r){const{x:n,y:o}=I.gridPositionToPoint(t,r);super(e,n,o,r,r);l(this,"positionValue");l(this,"size");this.positionValue=t,this.size=r,b(this.positionValue)&&this.positionValue.subscribe(this.updatePosition.bind(this)),b(i)?(i.subscribe(this.updateColor.bind(this)),this.updateColor(i.value)):this.updateColor(i),this.setStrokeStyle(2,16777215)}get position(){return _(this.positionValue)}static gridPositionToPoint(e,t){return _(e).mul(t).shift(t/2)}updatePosition(e){const t=I.gridPositionToPoint(e,this.size);this.setX(t.x),this.setY(t.y)}updateColor(e){var t;typeof e=="number"?this.setFillStyle(e,1):this.setFillStyle(e.color,(t=e.alpha)!=null?t:1)}}const c={BLACK:0,BLUE:4732116,GRAY:14673641,GREEN:6991948,LIME:12246104,ORANGE:15766315,PURPLE:12463837,RED:15420747,TEAL:2270899,VIOLET:1249088,WHITE:16777215,YELLOW:16370212};class He extends h.GameObjects.Container{constructor(e,t,i,r,n){super(e);l(this,"shape");l(this,"reference");l(this,"color");l(this,"elements");this.shape=t,this.reference=i,this.color=this.createComputedColor(n),this.elements=this.createElements(),this.add(this.elements),r.subscribe(this.updateVisibility.bind(this)),this.updateVisibility(r.value),this.setX(-1*v/2).setY(-1*v/2)}createComputedColor(e){return new B(()=>e.value?{color:c.BLACK,alpha:.5}:this.shape.color)}createComputedPoint(e){return new B(()=>this.reference.value.shift(e.x,e.y))}createElements(){return this.shape.points.map(e=>{const t=this.createComputedPoint(e);return new I(this.scene,t,this.color,g)})}updateVisibility(e){this.setVisible(e)}getBox(){const e=[...this.getPositions()].sort((i,r)=>i.y-r.y),t=[...this.getPositions()].sort((i,r)=>i.x-r.x);return{top:e[0].y,bottom:e[e.length-1].y,left:t[0].x,right:t[t.length-1].x}}getPositions(){return this.elements.map(e=>e.position)}}var Ye=Object.defineProperty,ke=Object.getOwnPropertyDescriptor,Fe=(s,e,t,i)=>{for(var r=i>1?void 0:i?ke(e,t):e,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(e,t,r):o(r))||r);return i&&r&&Ye(e,t,r),r};let $=class{constructor(s=20){l(this,"values");l(this,"clearDelay");this.values=k(Array.from({length:100}).map(()=>null)),this.clearDelay=s}static notNull(s){return s!==null}get freeCells(){return this.cells.map((s,e)=>{if(s===null){const t=e%10,i=(e-t)/10;return a.from({x:t,y:i})}else return null}).filter($.notNull)}get cells(){return this.values.value}set cells(s){this.values.value=s}get rows(){return Array.from({length:10}).map((s,e)=>new We(this,e))}get columns(){return Array.from({length:10}).map((s,e)=>new Xe(this,e))}getCell(s,e){return this.cells[e*10+s]}setCell(s,e,t){const i=[...this.cells];i[e*10+s]=t,this.cells=i}fillCells(s,e){s.forEach(t=>this.setCell(t.x,t.y,e))}hasCollisions(s){return s.some(e=>this.getCell(e.x,e.y)!==null)}canInsert(s){for(let e=s.edges.top;e<s.edges.bottom+1;e++)for(let t=s.edges.left;t<s.edges.right+1;t++)if(s.points.map(r=>r.shift(t,e)).every(r=>this.freeCells.find(n=>n.isEqualTo(r))))return!0;return!1}subscribe(s){this.values.subscribe(s)}reset(){this.cells=Array.from({length:100}).map(()=>null)}};$=Fe([G()],$);class ee{constructor(e,t){l(this,"matrix");l(this,"index");this.matrix=e,this.index=t}get isFull(){return this.values.every(e=>e!==null)}}class We extends ee{get values(){return this.matrix.cells.slice(10*this.index,10*this.index+10)}}class Xe extends ee{get values(){return Array.from({length:10}).map((e,t)=>this.matrix.getCell(this.index,t))}}var qe=Object.defineProperty,ze=Object.getOwnPropertyDescriptor,Ze=(s,e,t,i)=>{for(var r=i>1?void 0:i?ze(e,t):e,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(e,t,r):o(r))||r);return i&&r&&qe(e,t,r),r};let X=class{read(s){var e;return(e=localStorage.getItem(s))!=null?e:null}write(s,e){localStorage.setItem(s,e)}};X=Ze([T()],X);var Je=Object.defineProperty,Ke=Object.getOwnPropertyDescriptor,Qe=(s,e,t,i)=>{for(var r=i>1?void 0:i?Ke(e,t):e,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(e,t,r):o(r))||r);return i&&r&&Je(e,t,r),r},et=(s,e)=>(t,i)=>e(t,i,s);let R=class{constructor(s){l(this,"storageService");l(this,"current");l(this,"highest");this.storageService=s,this.current=S(0),this.highest=S(this.loadFromStorage())}loadFromStorage(){const s=this.storageService.read(Q),e=Number(s);return isNaN(e)?0:e}increase(s){this.current.value+=s,this.current.value>this.highest.value&&(this.highest.value=this.current.value,this.storageService.write(Q,`${s}`))}reset(){this.current.value=0}};R=Qe([G(),et(0,w(X))],R);class d{constructor(e,...t){l(this,"color");l(this,"points");this.color=e,this.points=t}get sortedX(){const e=[...this.points].sort((t,i)=>t.x-i.x);return[e[0],e[e.length-1]]}get sortedY(){const e=[...this.points].sort((t,i)=>t.y-i.y);return[e[0],e[e.length-1]]}get dimensions(){const[e,t]=this.sortedX,[i,r]=this.sortedY,n=Math.abs(t.x-e.x)+1,o=Math.abs(r.y-i.y)+1;return new y(n,o)}get edges(){const[e,t]=this.sortedX,[i,r]=this.sortedY;return{top:Math.abs(i.y),bottom:9-Math.abs(r.y),left:Math.abs(e.x),right:9-Math.abs(t.x)}}get center(){return a.from({x:this.dimensions.width/2,y:this.dimensions.height/2})}static from(e){return new d(e.color,...e.points)}}const tt=[new d(c.VIOLET,new a(0,0)),new d(c.LIME,new a(0,0),new a(1,0),new a(0,-1),new a(1,-1)),new d(c.TEAL,new a(0,0),new a(1,0),new a(2,0),new a(0,-1),new a(1,-1),new a(2,-1),new a(0,-2),new a(1,-2),new a(2,-2)),new d(c.YELLOW,new a(0,0),new a(1,0)),new d(c.YELLOW,new a(0,0),new a(0,-1)),new d(c.ORANGE,new a(0,0),new a(1,0),new a(2,0)),new d(c.ORANGE,new a(0,0),new a(0,-1),new a(0,-2)),new d(c.PURPLE,new a(0,0),new a(1,0),new a(2,0),new a(3,0)),new d(c.PURPLE,new a(0,0),new a(0,-1),new a(0,-2),new a(0,-3)),new d(c.RED,new a(-1,0),new a(0,0),new a(1,0),new a(2,0),new a(3,0)),new d(c.RED,new a(0,0),new a(0,-1),new a(0,-2),new a(0,-3),new a(0,-4)),new d(c.GREEN,new a(0,0),new a(0,-1),new a(1,-1)),new d(c.GREEN,new a(0,-1),new a(1,-1),new a(1,0)),new d(c.GREEN,new a(0,0),new a(1,0),new a(1,-1)),new d(c.GREEN,new a(0,0),new a(1,0),new a(0,-1)),new d(c.BLUE,new a(0,0),new a(0,-1),new a(0,-2),new a(1,-2),new a(2,-2)),new d(c.BLUE,new a(0,-2),new a(1,-2),new a(2,-2),new a(2,-1),new a(2,0)),new d(c.BLUE,new a(0,0),new a(1,0),new a(2,0),new a(2,-1),new a(2,-2)),new d(c.BLUE,new a(0,0),new a(1,0),new a(2,0),new a(0,-1),new a(0,-2))];var st=Object.defineProperty,rt=Object.getOwnPropertyDescriptor,it=(s,e,t,i)=>{for(var r=i>1?void 0:i?rt(e,t):e,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(e,t,r):o(r))||r);return i&&r&&st(e,t,r),r};let L=class{constructor(){l(this,"shapes");l(this,"lockedShapes");l(this,"selectedIdx");l(this,"selectedShape");this.shapes=k([]),this.lockedShapes=k([]),this.selectedIdx=S(null),this.selectedShape=P(()=>this.selectedIdx.value!==null?this.shapes.value[this.selectedIdx.value]:null),this.lockedShapes.subscribe(this.handleLocked.bind(this)),this.reset()}get availableShapes(){return this.shapes.value.filter((s,e)=>!this.lockedShapes.value.includes(e))}handleLocked(s){s.length===3&&this.reset()}reset(){this.selectedIdx.value=null,this.shapes.value=[...tt].sort(()=>.5-Math.random()).slice(0,3),this.lockedShapes.value=[]}lockSelectedShape(){this.selectedIdx.value!==null&&(this.lockedShapes.value=[...this.lockedShapes.value,this.selectedIdx.value],this.selectedIdx.value=null)}};L=it([G()],L);var nt=Object.defineProperty,at=Object.getOwnPropertyDescriptor,ot=(s,e,t,i)=>{for(var r=i>1?void 0:i?at(e,t):e,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(e,t,r):o(r))||r);return i&&r&&nt(e,t,r),r};let M=class{constructor(){l(this,"isOver");this.isOver=S(!1)}gameOver(){this.isOver.value=!0}reset(){this.isOver.value=!1}};M=ot([G()],M);const te=(s,e)=>new Promise(t=>{setTimeout(()=>{s(),t()},e)});var lt=Object.defineProperty,ct=Object.getOwnPropertyDescriptor,ht=(s,e,t,i)=>{for(var r=i>1?void 0:i?ct(e,t):e,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(e,t,r):o(r))||r);return i&&r&&lt(e,t,r),r},D=(s,e)=>(t,i)=>e(t,i,s);let N=class extends h.GameObjects.Container{constructor(s,e,t,i,r){super(s,v/2,v/2);l(this,"stateService");l(this,"shapesService");l(this,"matrixService");l(this,"scoreService");l(this,"pointerPosition",S(a.origin()));l(this,"isShapeContainerVisible",S(!1));l(this,"isShapeContainerError",S(!1));l(this,"hitArea");l(this,"shapeContainer",null);this.stateService=e,this.shapesService=t,this.matrixService=i,this.scoreService=r,this.hitArea=this.createHitArea(),this.shapesService.selectedShape.subscribe(this.updateShape.bind(this)),this.updateShape(this.shapesService.selectedShape.value),this.hitArea.setInteractive().on(h.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleClick.bind(this)).on(h.Input.Events.GAMEOBJECT_POINTER_MOVE,this.handleMove.bind(this)).on(h.Input.Events.GAMEOBJECT_POINTER_OVER,this.handleOver.bind(this)).on(h.Input.Events.GAMEOBJECT_POINTER_OUT,this.handleOut.bind(this)),this.add(this.hitArea)}static getGridPosition(s){return a.from(s).div(g)}createHitArea(){return new W(this.scene,a.origin(),y.square(v))}createShapeContainer(s){return new He(this.scene,s,this.pointerPosition,this.isShapeContainerVisible,this.isShapeContainerError)}updateShape(s){this.shapeContainer&&this.remove(this.shapeContainer,!0),s?(this.shapeContainer=this.createShapeContainer(s),this.add(this.shapeContainer)):this.shapeContainer=null}async handleClick(){const s=this.shapeContainer,e=this.shapesService.selectedShape.value;if(!s||!e)return;const t=s.getPositions();if(this.matrixService.hasCollisions(t))return;this.matrixService.fillCells(t,e.color),this.scoreService.increase(e.points.length),this.shapesService.lockSelectedShape();let i=this.matrixService.rows.filter(n=>n.isFull).map(n=>n.values.map((o,f)=>te(()=>{this.matrixService.setCell(f,n.index,null)},f*this.matrixService.clearDelay))).flat();i.length===0&&(i=this.matrixService.columns.filter(n=>n.isFull).map(n=>n.values.map((o,f)=>te(()=>{this.matrixService.setCell(n.index,f,null)},f*this.matrixService.clearDelay))).flat()),this.scoreService.increase(i.length),this.scene.sound.get(i.length>0?Y:H).play(),await Promise.all(i),this.shapesService.availableShapes.every(n=>!this.matrixService.canInsert(n))&&this.stateService.gameOver()}handleMove(s){if(!this.shapeContainer||!this.shapesService.selectedShape.value)return;const e=N.getGridPosition(s),t=this.shapeContainer.getBox(),i=this.shapesService.selectedShape.value.edges,r=()=>e.x-this.pointerPosition.value.x,n=()=>e.y-this.pointerPosition.value.y;t.top+n()<=0?e.y=i.top:t.bottom+n()>=9&&(e.y=i.bottom),t.left+r()<=0?e.x=i.left:t.right+r()>=9&&(e.x=i.right);const o=this.shapeContainer.getPositions().map(f=>f.shift(r(),n()));this.isShapeContainerError.value=this.matrixService.hasCollisions(o),this.pointerPosition.value=e}handleOver(){this.isShapeContainerVisible.value=!0}handleOut(){this.isShapeContainerVisible.value=!1}};N=ht([T(),D(0,w("Scene")),D(1,w(M)),D(2,w(L)),D(3,w($)),D(4,w(R))],N);var ut=Object.defineProperty,dt=Object.getOwnPropertyDescriptor,pt=(s,e,t,i)=>{for(var r=i>1?void 0:i?dt(e,t):e,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(e,t,r):o(r))||r);return i&&r&&ut(e,t,r),r},se=(s,e)=>(t,i)=>e(t,i,s);let q=class extends h.GameObjects.Container{constructor(s,e){super(s);l(this,"matrixService");this.matrixService=e,this.matrixService.subscribe(this.updateElements.bind(this))}createElement(s,e){return new I(this.scene,s,e,g)}updateElements(s){this.removeAll(!0),s.forEach((e,t)=>{if(e===null)return;const i=t%10,r=(t-i)/10,n=a.from({x:i,y:r}),o=this.createElement(n,e);this.add(o)})}};q=pt([T(),se(0,w("Scene")),se(1,w($))],q);class vt extends h.GameObjects.Container{constructor(e,t,i,r,n){super(e);l(this,"shape");l(this,"background");l(this,"border");l(this,"disabled");l(this,"selected");l(this,"hovered");l(this,"backgroundColor");l(this,"borderAlpha");l(this,"shapeContainer");l(this,"listener");this.shape=t,this.disabled=r,this.selected=i,this.hovered=new U(!1),this.backgroundColor=this.createComputedBackgroundColor(),this.borderAlpha=this.createComputedBorderAlpha(),this.background=this.createBackground(n),this.border=this.createBorder(n,2),this.shapeContainer=this.createShapeContainer(this.shape.value),this.listener=null,this.add([this.background,this.border,this.shapeContainer]),this.shape.subscribe(this.updateShapeContainer.bind(this)),this.disabled.subscribe(this.updateInteractive.bind(this)),this.disabled.subscribe(this.updateVisibility.bind(this)),this.updateInteractive(this.disabled.value)}createBackground(e){return new W(this.scene,a.origin(),y.square(e),this.backgroundColor,.1)}createBorder(e,t){return new W(this.scene,a.origin(),y.square(e-t),c.WHITE,0,t,c.TEAL,this.borderAlpha)}createShapeContainer(e){const t=new h.GameObjects.Container(this.scene),i=e.center.mul(-1,1).shift(e.edges.left,-1),r=e.points.map(n=>{const o=i.shift(n.x,n.y);return new I(this.scene,o,e.color,16)});return t.add(r),t}createComputedBackgroundColor(){return P(()=>!this.disabled.value&&(this.selected.value||this.hovered.value)?c.TEAL:c.WHITE)}createComputedBorderAlpha(){return P(()=>!this.disabled.value&&this.selected.value?1:0)}updateShapeContainer(e){this.remove(this.shapeContainer,!0),this.shapeContainer=this.createShapeContainer(e),this.add(this.shapeContainer)}updateInteractive(e){e?this.background.removeInteractive():this.background.setInteractive({useHandCursor:!0}).on(h.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleClick.bind(this)).on(h.Input.Events.GAMEOBJECT_POINTER_OVER,this.handleOver.bind(this)).on(h.Input.Events.GAMEOBJECT_POINTER_OUT,this.handleOut.bind(this))}updateVisibility(e){this.setVisible(!e)}handleClick(){this.listener&&this.listener()}handleOver(){this.disabled.value||(this.hovered.value=!0)}handleOut(){this.disabled.value||(this.hovered.value=!1)}onClick(e){return this.listener=e,this}}var ft=Object.defineProperty,wt=Object.getOwnPropertyDescriptor,mt=(s,e,t,i)=>{for(var r=i>1?void 0:i?wt(e,t):e,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(e,t,r):o(r))||r);return i&&r&&ft(e,t,r),r},re=(s,e)=>(t,i)=>e(t,i,s);let x=class extends h.GameObjects.Container{constructor(s,e){super(s);l(this,"shapesService");this.shapesService=e,this.create()}static get buttonSize(){return g*10/3}create(){const{selectedIdx:s,shapes:e,lockedShapes:t}=this.shapesService,i=e.value.map((r,n)=>{const o=new vt(this.scene,P(()=>e.value[n]),P(()=>n===s.value),P(()=>t.value.includes(n)),x.buttonSize);return o.setX(n*x.buttonSize).setY(x.buttonSize/2+20).onClick(()=>s.value=n),o});this.add(i),this.setX(x.buttonSize/2)}};x=mt([T(),re(0,w("Scene")),re(1,w(L))],x);class bt extends h.GameObjects.Container{constructor(e){super(e,v/2,v/2);l(this,"background");l(this,"lines");this.background=this.createBackground(),this.lines=this.createLines(),this.add(this.children)}get children(){return[this.background,...this.lines]}createBackground(){return new h.GameObjects.Rectangle(this.scene,0,0,v,v,c.GRAY)}createLines(){const e=Array.from({length:11}).map((i,r)=>this.createVerticalLine(g*r-v/2)),t=Array.from({length:11}).map((i,r)=>this.createHorizontalLine(g*r-v/2));return[...e,...t]}createVerticalLine(e){return new h.GameObjects.Rectangle(this.scene,e,0,2,v,c.WHITE)}createHorizontalLine(e){return new h.GameObjects.Rectangle(this.scene,0,e,v,2,c.WHITE)}}var _t=Object.defineProperty,gt=Object.getOwnPropertyDescriptor,St=(s,e,t,i)=>{for(var r=i>1?void 0:i?gt(e,t):e,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(e,t,r):o(r))||r);return i&&r&&_t(e,t,r),r},xt=(s,e)=>(t,i)=>e(t,i,s);let z=class extends h.Scene{constructor(s){super("Board");l(this,"shapesService");m.register("Scene",{useValue:this}),this.shapesService=s}preload(){this.load.audio(H,Ve),this.load.audio(Y,Ue)}create(){this.sound.add(H),this.sound.add(Y);const s=new bt(this),e=m.resolve(q),t=m.resolve(N),i=m.resolve(x);this.add.existing(s),this.add.existing(e).setDepth(0),this.add.existing(t).setDepth(1),this.add.existing(i).setY(v)}};z=St([T(),xt(0,w(L))],z);class Ct{constructor(e){l(this,"game");const t=m.resolve(z);this.game=new h.Game({type:h.CANVAS,parent:e,width:v,backgroundColor:16777215,height:e.offsetHeight,scene:[t]})}}const Ot={class:"relative flex flex-col flex-1"},Et=V({setup(s){const e=J(null),t=m.resolve(M),i=m.resolve(L),r=m.resolve($),n=m.resolve(R),o=F(t.isOver),f=()=>{t.reset(),i.reset(),r.reset(),n.reset()};return pe(()=>{e.value&&new Ct(e.value)}),(j,Z)=>(C(),O("div",Ot,[u("div",{ref_key:"gameContainer",ref:e,class:"flex-1"},null,512),A(Ne,{value:E(o),onRestart:f},null,8,["value"])]))}}),yt={class:"flex justify-center h-full"},Pt={class:"flex flex-col"},It={class:"flex flex-col shrink-0 py-8"},$t={class:"flex justify-center"},Lt={class:"flex items-center mt-8"},At={class:"flex items-center justify-center flex-1"},Tt={class:"text-3xl text-teal font-cursive"},Rt={class:"flex shrink-0"},Dt={class:"flex items-center justify-center flex-1"},jt={class:"text-3xl text-green font-cursive"},Bt=V({setup(s){const e=m.resolve(R),t=F(e.current),i=F(e.highest);return(r,n)=>(C(),O("div",yt,[u("div",Pt,[u("div",It,[u("div",$t,[A(E(Ce),{class:"w-36"})]),u("div",Lt,[u("div",At,[u("span",Tt,K(E(t)),1)]),u("div",Rt,[A(E(Ie),{class:"w-12 h-12 text-yellow"})]),u("div",Dt,[u("span",jt,K(E(i)),1)])])]),A(Et)])]))}});ve(Bt).mount("#app");
